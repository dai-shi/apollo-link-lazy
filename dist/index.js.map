{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import {\n  ApolloLink,\n  fromPromise,\n  toPromise,\n  Observable,\n} from 'apollo-link';\n\ntype Lazy = (factory: () => Promise<ApolloLink | { default: ApolloLink }>) => ApolloLink;\n\n/**\n * Lazy load ApolloLink promise\n *\n * @example\n * import { lazy } from 'apollo-link-lazy';\n *\n * const link = lazy(() => import('./link'));\n */\nexport const lazy: Lazy = (factory) => new ApolloLink(\n  (operation, forward) => fromPromise(\n    factory().then((resolved) => {\n      const link = resolved instanceof ApolloLink ? resolved : resolved.default;\n      return toPromise(link.request(operation, forward) || Observable.of());\n    }),\n  ),\n);\n"],"names":["factory","ApolloLink","operation","forward","fromPromise","then","resolved","toPromise","request","Observable","of"],"mappings":"0CAiB0B,SAACA,cAAgBC,cACzC,SAACC,EAAWC,UAAYC,cACtBJ,IAAUK,MAAK,SAACC,GAEd,OAAOC,aADMD,aAAoBL,aAAaK,EAAWA,WACnCE,QAAQN,EAAWC,IAAYM,aAAWC"}